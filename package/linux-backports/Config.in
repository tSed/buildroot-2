config BR2_PACKAGE_LINUX_BACKPORTS
	bool "linux-backports"
	depends on BR2_LINUX_KERNEL
	help
	  Compatibility driver backports (former compat-wireless).

	  http://wireless.kernel.org/

if BR2_PACKAGE_LINUX_BACKPORTS

#
# Version selection. We provide the choice between:
#
#  1. A single fairly recent stable backpoorts version
#  2. A custom stable version
#  3. A custom tarball
#  4. A custom repository
#
choice
	prompt "Backports version"

config BR2_PACKAGE_LINUX_BACKPORTS_3_10_19
	bool "3.10.19"

config BR2_PACKAGE_LINUX_BACKPORTS_3_11_8
	bool "3.11.8"

config BR2_PACKAGE_LINUX_BACKPORTS_3_12_8
	bool "3.12.8"

config BR2_PACKAGE_LINUX_BACKPORTS_3_13_2
	bool "3.13.2"

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_VERSION
	bool "Custom version"

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_TARBALL
	bool "Custom tarball"
	help
	  This option allows to specify the http or ftp location of a
	  specific kernel source tarball

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_GIT
	bool "Custom Git repository"
	help
	  This option allows Buildroot to get the backport source code
	  from a Git repository.

	  The official git tree on kernel.org:
	    git://git.kernel.org/pub/scm/linux/kernel/git/backports/backports.git
	  cannot be used here since the makefiles prevent from in-git-tree
	  build; however any git repository initialized from a release
	  tarball is fine.

endchoice

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_VERSION_VALUE
	string "Backports version"
	depends on BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_VERSION

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_TARBALL_LOCATION
	string "URL of custom backports tarball"
	depends on BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_TARBALL

if BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_GIT

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_REPO_URL
	string "URL of custom repository"

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_REPO_VERSION
	string "Custom repository version"

endif

config BR2_PACKAGE_LINUX_BACKPORTS_VERSION
	string
	default "3.10.19-1" if BR2_PACKAGE_LINUX_BACKPORTS_3_10_19
	default "3.11.8-1"  if BR2_PACKAGE_LINUX_BACKPORTS_3_11_8
	default "3.12.8-1"  if BR2_PACKAGE_LINUX_BACKPORTS_3_12_8
	default "3.13.2-1"  if BR2_PACKAGE_LINUX_BACKPORTS_3_13_2
	default BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_VERSION_VALUE \
		if BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_VERSION
	default "custom" if BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_TARBALL
	default BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_REPO_VERSION \
		if BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_GIT


#
# Patch selection
#

config BR2_PACKAGE_LINUX_BACKPORTS_PATCH
	string "Custom backports patches"
	help
	  A space-separated list of patches to apply to the
	  kernel. Each patch can be described as an URL, a local file
	  path, or a directory. In the case of a directory, all files
	  matching linux-*.patch in the directory will be applied.

#
# Configuration selection
#

#
# backports < 3.10 (named compat-drivers) do not support menuconfig
# command, the config is done (hardcoded) via a config.mk file
#

choice
	prompt "Backport configuration"
	default BR2_PACKAGE_LINUX_BACKPORTS_USE_DEFCONFIG

config BR2_PACKAGE_LINUX_BACKPORTS_USE_DEFCONFIG
	bool "Using a defconfig"

config BR2_PACKAGE_LINUX_BACKPORTS_USE_CUSTOM_CONFIG
	bool "Using a custom config file"

endchoice

config BR2_PACKAGE_LINUX_BACKPORTS_DEFCONFIG
	string "Defconfig name"
	depends on BR2_PACKAGE_LINUX_BACKPORTS_USE_DEFCONFIG
	help
	  Name of the backports defconfig file to use, without the
	  leading 'defconfig-'.  The defconfig is located in
	  defconfigs/ in the linux-backports tree.

config BR2_PACKAGE_LINUX_BACKPORTS_CUSTOM_CONFIG_FILE
	string "Configuration file path"
	depends on BR2_PACKAGE_LINUX_BACKPORTS_USE_CUSTOM_CONFIG
	help
	  Path to the linux-backports configuration file

endif
